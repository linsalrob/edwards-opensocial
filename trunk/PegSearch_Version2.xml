<?xml version="1.0" encoding="UTF-8"?>
<Module>

<ModulePrefs
		title="PEG Search"
		directory_title="Edwards Lab PEG Search"
		title_url=""
		description="PEG Search"
		author="Vasken K. and Matt S."
		author_affiliation="SDSU"
		author_location="San Diego, CA"
		author_email="skinien@cox.net"
		screenshot=""
		thumbnail="http://i74.photobucket.com/albums/i261/skinien/SDSU.jpg"
		height="200"
		width="200"
		scrolling="true"
		render_inline="optional"
		category="tools">
		<Require feature="opensocial-0.7" />
</ModulePrefs>

<Content type="html">
  
<![CDATA[
<script type="text/javascript" src="Prototype.js"></script>
<script type="text/javascript" src="ws_update.js"></script>
<script language="Javascript" type="text/javascript">
/****************************************************************************/

var url = 'http://ws.nmpdr.org/FIG/wsdl_seed.cgi';
//http://seed-viewer.theseed.org/SeedWebServices#get_translation

var peg = "fig|83333.1.peg.1345";
  
function getTranslation (peg) {
	var call = new WS.Call('/SeedWebServicesHandler'); 
	var nsuri = url;
	var qn_op = new WS.QName('get_translation',nsuri);
	var qn_op_resp = new WS.QName('get_translationResponse',nsuri);
	call.invoke_rpc(
	  qn_op,
	  new Array(
	    {name:'get_translationRequest',value:peg}
	   ),null,
	   function(call,envelope) {
	     var ret = 
	       envelope.get_body().get_all_children()[0].
	         get_all_children()[0].get_value();
	     container.innerHTML = ret;
	     $('soap').innerHTML = arguments[2].escapeHTML();
	     
	     // ADDED to test var ret
	     document.write(ret);
	   }
	);
}

document.write(getTranslation(peg));

document.write('\nEND OF FILE REACHED');
/******************************************************************************/
</script>]]>

</Content>
</Module>
